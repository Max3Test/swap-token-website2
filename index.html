<!-- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Trust Wallet –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º Axelar SDK -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>StMAX Farm + Bridge</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
  <script src="https://unpkg.com/web3modal"></script>
  <script src="https://unpkg.com/@axelar-network/axelarjs-sdk/dist/index.umd.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(to right, #1c1c1c, #2c2c2c);
      color: white;
      margin: 0;
      padding: 0;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      padding: 20px;
    }
    .left-panel, .right-panel {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .container {
      background: rgba(0,0,0,0.7);
      margin: auto;
      margin-top: 40px;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 20px #00ffff88;
      max-width: 400px;
      text-align: center;
    }
    select, input[type="number"], button {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }
    button {
      background: linear-gradient(to right, #00ffff, #007bff);
      color: #fff;
      cursor: pointer;
    }
    button:hover {
      background: linear-gradient(to right, #007bff, #00ffff);
    }
    .title {
      text-align: center;
      font-size: 2em;
      color: #00ffff;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <div class="left-panel">
      <button onclick="showTab('stake')">Stake</button>
      <button onclick="showTab('unstake')">Unstake</button>
    </div>
    <div class="right-panel">
      <button onclick="connectWallet()">Connect Wallet</button>
    </div>
  </div>

  <div class="title">Cross Chain Meme Proof Of Farm</div>

  <div class="container">
    <h2 id="tabTitle">Stake MAX ‚Üí StMAX</h2>
    <input type="number" id="stakeAmount" placeholder="Amount to Stake" />
    <button onclick="stakeTokens()">Stake</button>

    <div id="unstakeSection" style="display:none;">
      <h2>Unstake StMAX ‚Üí MAX</h2>
      <input type="number" id="unstakeAmount" placeholder="Amount to Unstake" />
      <button onclick="unstakeTokens()">Unstake</button>
    </div>

    <hr>
    <h3>Axelar Bridge</h3>
    <select id="fromChain">
      <option value="base">BASE</option>
      <option value="arbitrum">ARB</option>
      <option value="optimism">OP</option>
      <option value="binance">BNB</option>
      <option value="ethereum">ETH</option>
    </select>
    <select id="toChain">
      <option value="base">BASE</option>
      <option value="arbitrum">ARB</option>
      <option value="optimism">OP</option>
      <option value="binance">BNB</option>
      <option value="ethereum">ETH</option>
    </select>
    <select id="bridgeTokenSymbol">
      <option value="MAX">MAX</option>
      <option value="StMAX">StMAX</option>
    </select>
    <input type="number" id="bridgeAmount" placeholder="Amount to bridge" />
    <button onclick="bridgeWithAxelarUI()">Bridge with Axelar</button>
  </div>

<script>
let provider;
let signer;

const tokenAddresses = {
  base: {
    MAX: "0xYourMAXonBase",
    StMAX: "0xYourStMAXonBase"
  },
  arbitrum: {
    MAX: "0xYourMAXonArbitrum",
    StMAX: "0xYourStMAXonArbitrum"
  },
  optimism: {
    MAX: "0xYourMAXonOP",
    StMAX: "0xYourStMAXonOP"
  },
  binance: {
    MAX: "0xYourMAXonBNB",
    StMAX: "0xYourStMAXonBNB"
  }
};

async function getChainName() {
  const { chainId } = await provider.getNetwork();
  switch (chainId) {
    case 8453: return "base";
    case 42161: return "arbitrum";
    case 10: return "optimism";
    case 56: return "binance";
    default: return null;
  }
}

function showTab(tab) {
  document.getElementById("unstakeSection").style.display = (tab === 'unstake') ? 'block' : 'none';
  document.getElementById("tabTitle").innerText = (tab === 'unstake') ? "Unstake StMAX ‚Üí MAX" : "Stake MAX ‚Üí StMAX";
}

async function connectWallet() {
  const providerOptions = {
    injected: {
      display: {
        name: "MetaMask / Trust Wallet",
        description: "Connect with browser extension"
      },
      package: null
    },
    walletconnect: {
      package: window.WalletConnectProvider.default,
      options: {
        rpc: {
          1: "https://rpc.ankr.com/eth",
          56: "https://bsc-dataseed.binance.org/",
          137: "https://polygon-rpc.com",
          8453: "https://mainnet.base.org"
        },
        chainId: 8453
      }
    }
  };
  const web3Modal = new window.Web3Modal.default({ cacheProvider: false, providerOptions });
  const instance = await web3Modal.connect();
  provider = new ethers.providers.Web3Provider(instance);
  signer = provider.getSigner();
  const address = await signer.getAddress();
  document.querySelector("#connectBtn").innerText = `üîó ${address.slice(0,6)}...${address.slice(-4)}`;
  console.log("üîó Connected:", address);
}

async function stakeTokens() {
  if (!signer) return alert("Connect wallet first");
  const amount = document.getElementById("stakeAmount").value;
  const chain = await getChainName();
  if (!chain) return alert("Unsupported network");
  const tokenAddress = tokenAddresses[chain].MAX;
  const wrapperAddress = tokenAddresses[chain].StMAX;
  const tokenABI = ["function approve(address,uint256) external returns (bool)"];
  const wrapperABI = ["function deposit(uint256) external"];
  const token = new ethers.Contract(tokenAddress, tokenABI, signer);
  const wrapper = new ethers.Contract(wrapperAddress, wrapperABI, signer);
  const value = ethers.utils.parseUnits(amount, 18);
  await token.approve(wrapperAddress, value);
  await wrapper.deposit(value);
  alert("‚úÖ Staked!");
}

async function unstakeTokens() {
  if (!signer) return alert("Connect wallet first");
  const amount = document.getElementById("unstakeAmount").value;
  const chain = await getChainName();
  if (!chain) return alert("Unsupported network");
  const wrapperAddress = tokenAddresses[chain].StMAX;
  const wrapperABI = ["function withdraw(uint256) external"];
  const wrapper = new ethers.Contract(wrapperAddress, wrapperABI, signer);
  const value = ethers.utils.parseUnits(amount, 18);
  await wrapper.withdraw(value);
  alert("‚úÖ Unstaked!");
}

function bridgeWithAxelarUI() {
  const from = document.getElementById("fromChain").value;
  const to = document.getElementById("toChain").value;
  const symbol = document.getElementById("bridgeTokenSymbol").value;
  const amt = document.getElementById("bridgeAmount").value;
  if (!from || !to || !symbol || !amt) return alert("Please fill all fields");
  bridgeWithAxelar(from, to, symbol, amt);
}

window.bridgeWithAxelar = async function (sourceChain, destChain, tokenSymbol, amount) {
  try {
    const environment = "mainnet";
    const axelar = new window.axelar.AxelarQueryAPI ? new window.axelar.AxelarQueryAPI({ environment }) : null;
    if (!axelar) return alert("Axelar SDK not loaded correctly");
    if (!window.ethereum) return alert("No wallet");
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    const userAddress = accounts[0];
    const depositAddress = await axelar.getDepositAddress({
      fromChain: sourceChain,
      toChain: destChain,
      destinationAddress: userAddress,
      symbol: tokenSymbol
    });
    alert(`Send ${amount} ${tokenSymbol} to ${depositAddress}\nAxelar will bridge it to ${destChain}`);
  } catch (err) {
    console.error(err);
    alert("‚ùå Axelar Bridge failed");
  }
}
</script>
</body>
</html>
